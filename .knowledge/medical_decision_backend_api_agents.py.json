{"is_source_file": true, "format": "Python", "description": "This file contains definitions for classes related to patient and clinical agents in a medical decision support system, including session memory management, integration with OneDrive, and RAG-based recommendation functionalities.", "external_files": ["./rag_service", "./onedrive_integration", "./utils"], "external_methods": ["compose_recommendation", "safety_guardrails", "disclaimer_payload"], "published": ["ConversationMemory", "PatientAgent", "ClinicalAgent"], "classes": [{"name": "ConversationMemory", "description": "In-memory storage for conversation history keyed by session ID."}, {"name": "PatientAgent", "description": "Handles patient conversations, summarizes dialogues, and saves session notes to OneDrive."}, {"name": "ClinicalAgent", "description": "Provides evidence-based recommendations using RAG and refines medical reports."}], "methods": [{"name": "Tuple[str,Dict[str,Any]] reply(self, session_id: str, message: str)", "description": "Generates a patient reply based on session history and saves notes.", "scope": "PatientAgent", "scopeKind": "class"}, {"name": "Tuple[str,str] get_notes_location(self, session_id: str)", "description": "Returns the storage location of the session notes.", "scope": "PatientAgent", "scopeKind": "class"}, {"name": "Tuple[str,List[Dict[str,Any]],Dict[str,Any]] recommend(self, session_id: str, question: str, top_k: int = 4)", "description": "Performs a RAG-based search and provides medical recommendations with citations.", "scope": "ClinicalAgent", "scopeKind": "class"}, {"name": "Tuple[str,Dict[str,Any]] refine_report(self, session_id: str, report_text: str)", "description": "Produces a structured summary of a medical report.", "scope": "ClinicalAgent", "scopeKind": "class"}, {"name": "__init__(self)", "scope": "PatientAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, rag_index: RAGIndex)", "scope": "ClinicalAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "add(self, session_id: str, role: str, content: str)", "scope": "ConversationMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Dict[str,str]] get(self, session_id: str)", "scope": "ConversationMemory", "scopeKind": "class", "description": "unavailable"}, {"name": "str summary(self, session_id: str)", "scope": "ConversationMemory", "scopeKind": "class", "description": "unavailable"}], "calls": ["OneDriveClient.save_session_notes", "safety_guardrails", "compose_recommendation", "disclaimer_payload"], "search-terms": ["ConversationMemory", "PatientAgent", "ClinicalAgent", "session_notes", "OneDrive", "RAGIndex", "recommendation", "medical report", "refine_report"], "state": 2, "file_id": 22, "knowledge_revision": 45, "git_revision": "", "ctags": [{"_type": "tag", "name": "ClinicalAgent", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^class ClinicalAgent:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ConversationMemory", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^class ConversationMemory:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PatientAgent", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^class PatientAgent:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_MEMORY", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^_MEMORY = ConversationMemory()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ConversationMemory", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PatientAgent", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def __init__(self, rag_index: RAGIndex):$/", "language": "Python", "kind": "member", "signature": "(self, rag_index: RAGIndex)", "scope": "ClinicalAgent", "scopeKind": "class"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def add(self, session_id: str, role: str, content: str):$/", "language": "Python", "kind": "member", "signature": "(self, session_id: str, role: str, content: str)", "scope": "ConversationMemory", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def get(self, session_id: str) -> List[Dict[str, str]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,str]]", "kind": "member", "signature": "(self, session_id: str)", "scope": "ConversationMemory", "scopeKind": "class"}, {"_type": "tag", "name": "get_notes_location", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def get_notes_location(self, session_id: str) -> Tuple[str, str]:$/", "language": "Python", "typeref": "typename:Tuple[str,str]", "kind": "member", "signature": "(self, session_id: str)", "scope": "PatientAgent", "scopeKind": "class"}, {"_type": "tag", "name": "recommend", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def recommend(self, session_id: str, question: str, top_k: int = 4) -> Tuple[str, List[Dict[/", "language": "Python", "typeref": "typename:Tuple[str,List[Dict[str,Any]],Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str, question: str, top_k: int = 4)", "scope": "ClinicalAgent", "scopeKind": "class"}, {"_type": "tag", "name": "refine_report", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def refine_report(self, session_id: str, report_text: str) -> Tuple[str, Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Tuple[str,Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str, report_text: str)", "scope": "ClinicalAgent", "scopeKind": "class"}, {"_type": "tag", "name": "reply", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def reply(self, session_id: str, message: str) -> Tuple[str, Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Tuple[str,Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str, message: str)", "scope": "PatientAgent", "scopeKind": "class"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2889-2898/medical_decision_backend/api/agents.py", "pattern": "/^    def summary(self, session_id: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str)", "scope": "ConversationMemory", "scopeKind": "class"}], "hash": "7586f95bde490cc2fa42ba34fc27d546", "format-version": 4, "code-base-name": "medical_decision_backend", "filename": "medical_decision_backend/api/agents.py", "fields": [{"name": "_MEMORY = ConversationMemory()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"45": ""}]}